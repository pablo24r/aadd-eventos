<ui:composition template="/WEB-INF/template/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="metadata">

		<f:metadata>
			<f:viewAction
				action="#{propietarioBean.cargarEspacios(loginBean.nombreUsuario, loginBean.rol)}" />
		</f:metadata>
	</ui:define>

	<!-- Contenido principal -->
	<ui:define name="content">
		<h:body>
			<h:form id="espaciosForm">
				<p:panel header="#{text.espacios}">
					<h:dataTable value="#{propietarioBean.espacios}" var="espacio"
						styleClass="ui-widget" emptyMessage="No hay espacios disponibles">
						<h:column>
							<f:facet name="header">#{text.nombre}</f:facet>
                        #{espacio.nombre}
                    </h:column>

						<h:column>
							<f:facet name="header">#{text.capacidad}</f:facet>
                        #{espacio.capacidad}
                    </h:column>

						<h:column>
							<f:facet name="header">#{text.direccion}</f:facet>
                        #{espacio.direccion}
                    </h:column>

						<h:column>
							<f:facet name="header">#{text.activo}</f:facet>
                        #{espacio.estado}
                    </h:column>

						<h:column>
							<f:facet name="header">#{text.acciones}</f:facet>
							<p:commandButton value="#{text.btnEstado}"
								action="#{propietarioBean.cambiarEstado(espacio.id)}"
								icon="pi pi-refresh"
								update=":espaciosForm" />
						</h:column>
					</h:dataTable>
				</p:panel>
			</h:form>
		</h:body>
	</ui:define>
</ui:composition>
